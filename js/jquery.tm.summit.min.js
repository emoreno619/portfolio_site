/**
*	Summit Lightbox
*	Version: 1.0
*	URL: @ThemeMountain
*	Description: Lightbox plugin
*	Requires: jQuery 1.10+
*	Author: ThemeMountain
*	Copyright: Copyright 2013 ThemeMountain
*	License: Attribution-NonCommercial 3.0 (http://creativecommons.org/licenses/by-nc/3.0/)
*/
!function(t,a,e,i){"use strict";var n=function(a,i){var n=t.extend({},t.fn.summitLightbox.tmlOpts,i),l=t(a),c=this,f=[];l.on("click",function(a){a.preventDefault(),t(l).data("group")&&(f=s(l)),t(this).addClass("tml-active"),r(f,n,c)}),t(e).on("resize",function(){u(n)}),c.nextContent=function(){var a=t("#tml-content");if(a.data("loading"))return!1;p(0,n);var e=t(".tml-active"),i=s(e),o=i[t.inArray(e.attr("id"),i)+1];o=t.inArray(o,i)+1===0?i[0]:o,e.removeClass("tml-active"),o=t("#"+o).addClass("tml-active"),d(o,"next",n),i.length=0},c.prevContent=function(){var a=t("#tml-content");if(a.data("loading"))return!1;p(0,n);var e=t(".tml-active"),i=s(e),o=i[t.inArray(e.attr("id"),i)-1];o=t.inArray(o,i)+1===0?i[i.length-1]:o,e.removeClass("tml-active"),o=t("#"+o).addClass("tml-active"),d(o,"prev",n),i.length=0},c.destroyLightbox=function(){var a=t("#tm-lightbox"),e=t("#tml-content"),i=null,s=o(a,n);if(g){if(a.data("transitioning"))return!1;a.children().css({transition:"none"}),e.css({transition:"none"}),a.one(x,function(){clearTimeout(i),i=setTimeout(function(){a.find("iframe").attr("src",""),a.remove(),a=null},50)}),h(a,0,s.x,s.y,n)}else{if(a.is(":animated"))return!1;e.remove(),a.animate({opacity:0,left:s.x+"px",top:s.y+"px"},n.speed,n.easing,function(){a.find("iframe").attr("src",""),a.remove(),a=null})}f.length=0,t(".tml-active").removeClass("tml-active"),n.onExit&&n.onExit()}},s=function(a){if(t(a).is("[data-group]")){var e=t(a).data("group"),i=[];return t('[data-group="'+e+'"]').each(function(a){a++,t(this).attr("id")?i.push(t(this).attr("id")):(t(this).attr("id",e+"-tml-thumb-"+a),i.push(t(this).attr("id")))}),i}},o=function(a,i){var n=i.lightboxAnimation,s="slideInLeft"===n||"slideInTop"===n?-1:"slideInRight"===n||"slideInBottom"===n?1:0,o="slideInLeft"===n||"slideInRight"===n?t(e).width()*s:0,r="slideInTop"===n||"slideInBottom"===n?t(e).height()*s:0;return{x:o,y:r}},r=function(e,i,n){if(t("#tm-lightbox").length)return!1;t("body").append('<div id="tm-lightbox" class="tm-lightbox"><div id="tml-content-wrapper" ><div id="tml-content" /></div><div id="tml-caption" /></div>');var s=t("#tm-lightbox"),r=t("#tml-content-wrapper"),d=t("#tml-content"),c=null;s.data("initLoad",!0);var u=i.contentMargin;if(r.css({top:u+"%",right:u+"%",bottom:u+"%",left:u+"%"}),e.length<2||d.swipeIt({preventTouchOn:".scrollable-content",onSwipeMove:function(t){d.css({left:t+"px"})},onSwipeEnd:function(t){"left"===t?n.prevContent():n.nextContent()}}),i.overlay||s.css({background:"none"}),i.navArrows&&e.length>=2){var p=t('<a href="#" />').attr("id","tml-prev").addClass("tml-nav").appendTo(s),f=t('<a href="#" />').attr("id","tml-next").addClass("tml-nav").appendTo(s);p.on("click",function(t){t.preventDefault(),n.prevContent()}),f.on("click",function(t){t.preventDefault(),n.nextContent()})}if(i.navExit){var v=t('<a href="" id="tml-exit" class="tml-nav" />').appendTo(s);v.on("click",function(t){t.preventDefault(),n.destroyLightbox()})}i.navKeyboard&&t(a).on("keyup",function(t){37!=t.keyCode||e.length<2?39!=t.keyCode||e.length<2?27==t.keyCode&&n.destroyLightbox():n.nextContent():n.prevContent()}),i.overlayClickClose&&s.on("click",function(t){(t.target===this||"tml-content-wrapper"===t.target.id)&&n.destroyLightbox()});var m=o(s,i);if(g){if(s.css({transition:"none",transform:"translate3d("+m.x+"px, "+m.y+"px, 0px)"}),s.data("transitioning"))return!1;clearTimeout(c),c=setTimeout(function(){s.one(x,function(){l(t(".tml-active"),"next",i)}),h(s,1,0,0,i)},50)}else s.css({left:m.x+"px",top:m.y+"px"}),s.animate({opacity:1,left:0,top:0},i.speed,i.easing,function(){l(t(".tml-active"),"next",i)})},d=function(a,e,i){var n=(t("#tm-lightbox"),t("#tml-content"));n.data("loading",!0);var s="fade"===i.contentAnimation?0:i.slideAmount;if(e="next"===e?1:-1,g)n.one(x,function(){t(this).css({visibility:"hidden"}),l(a,e,i)}),h(n,0,-s*e,0,i);else{var o=n.position().left;n.animate({opacity:0,left:o-s*e+"px"},i.speed,i.easing,function(){t(this).css({visibility:"hidden"}),l(a,e,i)})}},l=function(a,i,n){var s=t("#tm-lightbox"),o=t("#tml-content");o.find("iframe").attr("src",""),o.removeClass("tml-error scrollable-content").data("type","").html("");var r=a.attr("href"),d=r.match(/\.(jpeg|jpg|png|gif)/i),l=r.match(/(vimeo\.com|youtu(be\.com|\.be))\/(watch\?v=)?([A-Za-z0-9._%-]*)(\&\S+)?/),u=a.is('[data-content="inline"]'),h=a.is('[data-content="iframe"]'),p=a.is('[data-content="ajax"]');if(t("#tml-loader").length&&t("#tml-loader").remove(),s.append('<div id="tml-loader" class="tm-loader"><div id="circle" /></div>'),d){var f=r.substr(r.lastIndexOf("."));(e.isRetinaDevice()&&n.retinaSupport||e.isRetinaDevice()&&a.is("[data-retina]"))&&(!T&&!n.retinaSupportMobile||T&&n.retinaSupportMobile)&&(r=r.replace(f,n.retinaSuffix+f)),o.data("type","img"),t("<img />").addClass("tml-image").attr("src",r).one("load",function(){o.html(t(this)),c(!0,i,n)}).each(function(){this.complete&&t(this).trigger("load")}).on("error",function(){c(!1,i,n)})}if(l){o.data("type","video");var v=t('<iframe src="'+r+'" wmode="opaque" frameborder="0" webkitAllowFullScreen mozallowfullscreen allowFullScreen />');o.html(v),v.one("load",function(){c(!0,i,n)})}if(u)if(o.addClass("scrollable-content").data("type","inline"),t(r).length){var m=t(r).clone().css({display:"block",visibility:"visible",opacity:1});o.html(m),c(!0,i,n)}else c(!1,i,n);if(h){o.addClass("scrollable-content").data("type","iframe");var g=t('<iframe src="'+r+'" frameborder="0" scrolling="auto" />');o.html(g),g.one("load",function(){c(!0,i,n)})}if(p){o.addClass("scrollable-content").data("type","ajax");var b=a.data("target-container");t.ajax({url:r,cache:!1,success:function(a){o.html(t(a).find(b).length?t(a).find(b):a),c(!0,i,n)},error:function(){c(!1,i,n)}})}},c=function(a,e,i){var n=t("#tm-lightbox"),s=t("#tml-content"),o=null;if(u(i),n.find("#tml-loader").remove(),a){var r="fade"===i.contentAnimation?0:i.slideAmount;if(g)s.css({transition:"none",opacity:0,transform:"translate3d("+r*e+"px, 0, 0)"}),clearTimeout(o),o=setTimeout(function(){s.one(x,function(){s.data("loading",!1)}),h(s,1,0,0,i)},50);else{var d=s.position().left,l=n.data("initLoad")?d:1===e?d+2*r:d-2*r;s.css({visibility:"visible",left:l+"px"}).animate({opacity:1,left:d+"px"},i.speed,i.easing,function(){s.data("loading",!1)})}p(1,i),i.onLoaded&&i.onLoaded()}else{var c="";i.showErrorSrc&&(c=": "+t(".tml-active").attr("href")),s.css({width:"100%",height:"auto",top:"50%",left:0,transition:"none",transform:"translate3d( 0, 0, 0)"}).addClass("tml-error").html(i.errorMessage+c),g?(clearTimeout(o),o=setTimeout(function(){s.one(x,function(){s.data("loading",!1)}),h(s,1,0,0,i)},50)):s.css({visibility:"visible"}).animate({opacity:1},function(){s.data("loading",!1)})}n.data("initLoad",!1)},u=function(a){var e=t("#tml-content-wrapper").width(),i=t("#tml-content-wrapper").height(),n=t("#tml-content"),s=n.data("type"),o=0,r=0,d=0,l=0,c=0;if(n.not(".tml-error").css({height:"auto",width:"auto",top:"",left:""}),"img"===s)r=n.find("img").width(),d=n.find("img").height();else if("video"===s)r=a.maxWidth,d=r/1.778;else if("iframe"===s)r=e<a.maxWidth?e:a.maxWidth,d=i;else{var u=n.children().outerWidth(),h=n.children().outerHeight();r=e>u&&u<=a.maxWidth?u:u>a.maxWidth?a.maxWidth:e,d=i>h?h:i}("img"===s||"video"===s)&&(o=r/d>e/i?r/e:d/i,r=r/o>r?r:r/o,d=d/o>d?d:d/o),c=(e-r)/2,l=(i-d)/2,n.css({width:Math.round(r)+"px",height:Math.round(d)+"px",top:Math.round(l)+"px",left:Math.round(c)+"px"})},h=function(a,e,i,n,s){{var o=t("#tm-lightbox");t("#tml-content")}"tm-lightbox"===a.attr("id")&&o.data("transitioning",!0);var r={};r.transform="translate3d("+i+"px, "+n+"px, 0px)",r.transitionProperty=w+", opacity",r.transitionDuration=s.speed+"ms",r.transitionTimingFunction=S[s.easing],r.visibility="visible",r.opacity=e,a.css(r).one(x,function(e){e.stopPropagation(),t(this).off(x),"tm-lightbox"===a.attr("id")&&o.data("transitioning",!1)})},p=function(a,e){var i=t("#tml-caption"),n=t(".tml-active").data("caption");n?(i.html(t("<span />").text(n)),g?h(t("#tml-caption"),a,0,0,e):t("#tml-caption").animate({opacity:a})):i.html("")};e.isRetinaDevice=function(){var t="(-webkit-min-device-pixel-ratio: 1.5), (min--moz-device-pixel-ratio: 1.5), (-o-min-device-pixel-ratio: 3/2), (min-resolution: 1.5dppx)";return this.devicePixelRatio>1||this.matchMedia&&this.matchMedia(t).matches?!0:!1};var f,v=a.body||a.documentElement,m=v.style,g=m.transition!==i||m.WebkitTransition!==i||m.MozTransition!==i||m.MsTransition!==i||m.OTransition!==i,b=["WebkitTransform","MozTransform","OTransform","msTransform"];for(var y in b)m[b[y]]!==i&&(f="-"+b[y].replace("Transform","").toLowerCase());var w=f+"-transform",x="webkitTransitionEnd otransitionend oTransitionEnd msTransitionEnd transitionend",S={linear:"cubic-bezier(0, 0, 1, 1)",swing:"cubic-bezier(0.42, 0, 0.58, 1)",easeOutCubic:"cubic-bezier(.215,.61,.355,1)",easeInOutCubic:"cubic-bezier(.645,.045,.355,1)",easeInCirc:"cubic-bezier(.6,.04,.98,.335)",easeOutCirc:"cubic-bezier(.075,.82,.165,1)",easeInOutCirc:"cubic-bezier(.785,.135,.15,.86)",easeInExpo:"cubic-bezier(.95,.05,.795,.035)",easeOutExpo:"cubic-bezier(.19,1,.22,1)",easeInOutExpo:"cubic-bezier(1,0,0,1)",easeInQuad:"cubic-bezier(.55,.085,.68,.53)",easeOutQuad:"cubic-bezier(.25,.46,.45,.94)",easeInOutQuad:"cubic-bezier(.455,.03,.515,.955)",easeInQuart:"cubic-bezier(.895,.03,.685,.22)",easeOutQuart:"cubic-bezier(.165,.84,.44,1)",easeInOutQuart:"cubic-bezier(.77,0,.175,1)",easeInQuint:"cubic-bezier(.755,.05,.855,.06)",easeOutQuint:"cubic-bezier(.23,1,.32,1)",easeInOutQuint:"cubic-bezier(.86,0,.07,1)",easeInSine:"cubic-bezier(.47,0,.745,.715)",easeOutSine:"cubic-bezier(.39,.575,.565,1)",easeInOutSine:"cubic-bezier(.445,.05,.55,.95)",easeInBack:"cubic-bezier(.6,-.28,.735,.045)",easeOutBack:"cubic-bezier(.175, .885,.32,1.275)",easeInOutBack:"cubic-bezier(.68,-.55,.265,1.55)"},T=!1;(navigator.userAgent.match(/Android/i)||navigator.userAgent.match(/webOS/i)||navigator.userAgent.match(/iPhone/i)||navigator.userAgent.match(/iPad/i)||navigator.userAgent.match(/iPod/i)||navigator.userAgent.match(/BlackBerry/i)||navigator.userAgent.match(/Windows Phone/i))&&(T=!0),t.fn.summitLightbox=function(a){return this.each(function(){var e=t(this);if(!e.data("summitLightbox")){var i=new n(this,a);e.data("summitLightbox",i)}})},t.fn.summitLightbox.tmlOpts={lightboxAnimation:"fade",contentAnimation:"slide",slideAmount:100,easing:"swing",speed:350,overlay:!0,maxWidth:1140,contentMargin:15,navArrows:!0,navKeyboard:!0,navExit:!0,overlayClickClose:!0,retinaSupport:!0,retinaSupportMobile:!1,retinaSuffix:"@2x",errorMessage:"Please Check",showErrorSrc:!0,onSetup:null,onLoaded:null,onDestroy:null}}(jQuery,document,window);