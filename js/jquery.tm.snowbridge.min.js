/**
*	Snowbridge Parallax
*	Version: 1.0.1
*	URL: @ThemeMountain
*	Description: Parallax plugin
*	Requires: jQuery 1.10+
*	Author: ThemeMountain
*	Copyright: Copyright 2013 ThemeMountain
*	License: Attribution-NonCommercial 3.0 (http://creativecommons.org/licenses/by-nc/3.0/)
*/
!function(a,t,e,i){"use strict";function n(t,i){var n=a('<div class="tm-parallax" />').prependTo(a(t));v&&n.css({height:""}).addClass("tmp-mobile");var o=a('<div class="tm-loader"><div id="circle" /></div>');o.appendTo(n);var s=t.data("src"),d=s.substr(s.lastIndexOf("."));(e.isRetinaDevice()&&i.retinaSupport||e.isRetinaDevice()&&t.is("[data-retina]"))&&(!v&&!i.retinaSupportMobile||v&&i.retinaSupportMobile)&&(s=t.data("src").replace(d,i.retinaSuffix+d)),a('<img class="tmp-media"/>').attr("src",s).one("load",function(){a(this).attr("src",s).appendTo(n),n.find(".tm-loader").remove(),r(t,i)}).on("error",function(){console.log("Error src:"+s)})}function r(t,i){var n=t.find(".tmp-media");n.data("refW",n.width()).data("refH",n.height()),n.css({opacity:0}),d(t,i),l(t,i),m&&c(t)?n.css({visibility:"visible",transitionProperty:"opacity",transitionDuration:"1000ms",opacity:1}):n.css({visibility:"visible"}).animate({opacity:1}),a(e).on("resize",function(){d(t,i),s(t,i)}),a(e).on("scroll",function(){s(t,i)}),i.onLoaded&&i.onLoaded()}var o=function(t,e){var i=a.extend({},a.fn.snowBridge.tmpOpts,e),r=a(t),o=i.scaleContainer?i.scaleUnder:r.width();r.data("animating",!1).data("setup",!1).data("refW",o).data("refH",r.height()),d(r,i),i.fullscreen&&(i.scaleContainer=!0),i.parallaxFactor>1&&(i.parallaxFactor=1),r.data("setup",!0),n(r,i)},s=function(a,t){a.data("animating")||(a.data("animating",!0),e.requestAnimationFrame(function(){l(a,t),a.data("animating",!1)}))},d=function(t,i){var n=t.data("external-padding")?parseFloat(t.data("external-padding")):i.externalPadding,r=a(e).width()-n,o=a(e).height()-n,s=t.data("refW"),d=t.data("refH"),l=i.fullscreen?r/o:s/d,c=i.fullscreen?o:r/l>d?d:r/l;if((i.fullscreen||i.scaleContainer)&&(t.css({width:r+"px",height:Math.round(c)>i.scaleMinHeight?Math.round(c)+"px":i.scaleMinHeight+"px"}),c=Math.round(c)>i.scaleMinHeight?c:i.scaleMinHeight),!t.data("setup"))return!1;var h=t.find(".tmp-media"),p=h.data("refW"),u=h.data("refH"),m=p/u,f=i.fullscreen?o+o*i.parallaxFactor:i.scaleContainer?c+c*i.parallaxFactor:d+d*i.parallaxFactor,g=f*m,x=c*i.parallaxFactor,M=v?-((f-c)/2):0;h.css(i.fullscreen||i.scaleContainer?g>r?{width:Math.round(g)+"px",height:Math.round(f)+"px",left:-Math.round((g-r)/2)+"px",top:M+"px"}:{width:r+"px",height:Math.round(r/m)+"px",left:0,top:M+"px"}:g>r?{width:Math.round(f*m)+"px",height:Math.round(f)+"px",left:-Math.round((f*m-r)/2)+"px",top:M+"px"}:{width:r+"px",height:Math.round(r/m)+"px",left:0,top:M+"px"}),t.data("scrollDistContainer",x)},l=function(t,i){var n=t.find(".tmp-media");if(c(t)){if(v)return!1;var r=t.height()+t.offset().top-a(e).scrollTop(),o=t.offset().top-a(e).scrollTop(),s=.5*-(n.height()/2),d=s*(r/t.data("scrollDistContainer"))*i.parallaxFactor;if(n.css(m?{transform:"translate3d( 0px, "+d+"px, 0px)",visibility:"visible"}:{top:d+"px",visibility:"visible"}),i.fadeInOut){var l,h=a(e).height(),p=i.fadeThreshold>1?.5*t.height():t.height()*i.fadeThreshold;o>p||(l=Math.abs(r/p)>1?1:Math.abs(r/p)),o>h||h-p>o||(l=(h-o)/p>1?1:(h-o)/p),n.parent().css({opacity:(Math.ceil(100*l)/100).toFixed(2)})}}else v||n.css({visibility:"hidden"})},c=function(t){var i=a(e).scrollTop(),n=i+a(e).height(),r=t.offset().top,o=r+t.outerHeight();return n>=r&&o>=i};e.isRetinaDevice=function(){var a="(-webkit-min-device-pixel-ratio: 1.5), (min--moz-device-pixel-ratio: 1.5), (-o-min-device-pixel-ratio: 3/2), (min-resolution: 1.5dppx)";return this.devicePixelRatio>1||this.matchMedia&&this.matchMedia(a).matches?!0:!1};var h,p=t.body||t.documentElement,u=p.style,m=u.transition!==i||u.WebkitTransition!==i||u.MozTransition!==i||u.MsTransition!==i||u.OTransition!==i,f=["WebkitTransform","MozTransform","OTransform","msTransform"];for(var g in f)u[f[g]]!==i&&(h="-"+f[g].replace("Transform","").toLowerCase());var v=!1;(navigator.userAgent.match(/Android/i)||navigator.userAgent.match(/webOS/i)||navigator.userAgent.match(/iPhone/i)||navigator.userAgent.match(/iPad/i)||navigator.userAgent.match(/iPod/i)||navigator.userAgent.match(/BlackBerry/i)||navigator.userAgent.match(/Windows Phone/i))&&(v=!0),function(){for(var a=0,t=["ms","moz","webkit","o"],i=0;i<t.length&&!e.requestAnimationFrame;++i)e.requestAnimationFrame=e[t[i]+"RequestAnimationFrame"],e.cancelAnimationFrame=e[t[i]+"CancelAnimationFrame"]||e[t[i]+"CancelRequestAnimationFrame"];e.requestAnimationFrame||(e.requestAnimationFrame=function(t){var i=(new Date).getTime(),n=Math.max(0,16-(i-a)),r=e.setTimeout(function(){t(i+n)},n);return a=i+n,r}),e.cancelAnimationFrame||(e.cancelAnimationFrame=function(a){clearTimeout(a)})}(),a.fn.snowBridge=function(t){return this.each(function(){var e=a(this);if(!e.data("snowBridge")){var i=new o(this,t);e.data("snowBridge",i)}})},a.fn.snowBridge.tmpOpts={fullscreen:!1,externalPadding:0,parallaxFactor:.7,fadeInOut:!0,fadeThreshold:.5,scaleContainer:!0,scaleUnder:1140,scaleMinHeight:250,retinaSupport:!0,retinaSupportMobile:!1,retinaSuffix:"@2x",onLoaded:null}}(jQuery,document,window);